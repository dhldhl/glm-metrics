<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genomic Language Model Evaluation Metrics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .metric-card {
            transition: all 0.3s ease;
        }
        .metric-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .metric-content.expanded {
            max-height: 2000px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-50 to-indigo-50">
    <div class="w-full max-w-6xl mx-auto p-6 min-h-screen">
        <!-- Header -->
        <div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-lg shadow-xl p-8 mb-8 text-white">
            <h1 class="text-4xl font-bold mb-3">Genomic Language Model Evaluation</h1>
            <p class="text-indigo-100 text-lg">Understanding key metrics for assessing model performance on biological sequences</p>
        </div>

        <!-- Overview -->
        <div class="bg-white rounded-lg shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Why Multiple Metrics?</h2>
            <p class="text-slate-600 mb-4">
                Genomic language models must capture multiple levels of biological organization‚Äîfrom local sequence patterns to long-range interactions. Each metric evaluates a different aspect of the model's understanding:
            </p>
            <div class="grid md:grid-cols-3 gap-4">
                <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <h3 class="font-semibold text-blue-900 mb-2">Structure Prediction</h3>
                    <p class="text-sm text-blue-700">pTM, pLDDT assess 3D protein structure quality</p>
                </div>
                <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                    <h3 class="font-semibold text-purple-900 mb-2">Spatial Interactions</h3>
                    <p class="text-sm text-purple-700">Contact maps evaluate residue proximities</p>
                </div>
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                    <h3 class="font-semibold text-green-900 mb-2">Functional Context</h3>
                    <p class="text-sm text-green-700">Operon inpainting tests functional genomic understanding</p>
                </div>
            </div>
        </div>

        <!-- Generative Capabilities Highlight -->
        <div class="bg-gradient-to-r from-amber-50 via-yellow-50 to-amber-50 rounded-lg shadow-lg p-6 mb-6 border-2 border-amber-400">
            <div class="flex items-center gap-3 mb-4">
                <svg class="w-8 h-8 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>
                <h2 class="text-2xl font-bold text-amber-900">‚≠ê Evaluating Generative Capabilities</h2>
            </div>
            <p class="text-slate-700 mb-4">
                Beyond understanding existing sequences, genomic language models can <span class="font-semibold text-amber-900">generate novel biological sequences</span>. Evaluating generative capabilities tests whether the model truly understands biological constraints or just memorizes patterns.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div class="bg-white rounded-lg p-4 border-l-4 border-amber-500">
                    <h3 class="font-bold text-slate-800 mb-2">üß¨ Sequence Generation Quality</h3>
                    <p class="text-sm text-slate-600 mb-3">Generate novel DNA/protein sequences and validate them:</p>
                    <ul class="text-xs text-slate-600 space-y-1">
                        <li>‚Ä¢ <span class="font-semibold">Structure validation:</span> Do generated proteins fold into stable structures? (pTM, pLDDT, TM-score)</li>
                        <li>‚Ä¢ <span class="font-semibold">Functional coherence:</span> Are generated sequences functionally plausible? (functional annotation, fitness prediction)</li>
                        <li>‚Ä¢ <span class="font-semibold">Diversity vs. validity:</span> Balance between novel sequences and biological realism</li>
                        <li>‚Ä¢ <span class="font-semibold">Experimental validation:</span> Ultimate test - synthesize and test in the lab</li>
                    </ul>
                </div>

                <div class="bg-white rounded-lg p-4 border-l-4 border-amber-500">
                    <h3 class="font-bold text-slate-800 mb-2">üîÑ Conditional Generation Tasks</h3>
                    <p class="text-sm text-slate-600 mb-3">Generate sequences with specific properties:</p>
                    <ul class="text-xs text-slate-600 space-y-1">
                        <li>‚Ä¢ <span class="font-semibold">Operon inpainting:</span> Fill in masked genes with functionally appropriate sequences</li>
                        <li>‚Ä¢ <span class="font-semibold">Variant design:</span> Generate beneficial mutations (optimize fitness while maintaining fold)</li>
                        <li>‚Ä¢ <span class="font-semibold">Promoter design:</span> Create regulatory elements with desired expression patterns</li>
                        <li>‚Ä¢ <span class="font-semibold">Protein engineering:</span> Design sequences with target properties (stability, activity, specificity)</li>
                    </ul>
                </div>

                <div class="bg-white rounded-lg p-4 border-l-4 border-amber-500">
                    <h3 class="font-bold text-slate-800 mb-2">üìä Generative Evaluation Metrics</h3>
                    <ul class="text-xs text-slate-600 space-y-1">
                        <li>‚Ä¢ <span class="font-semibold">Validity rate:</span> % of generated sequences that are biologically plausible</li>
                        <li>‚Ä¢ <span class="font-semibold">Novelty score:</span> Distance from training set (avoid simple memorization)</li>
                        <li>‚Ä¢ <span class="font-semibold">Property success rate:</span> % achieving desired functional properties</li>
                        <li>‚Ä¢ <span class="font-semibold">Fr√©chet Inception Distance (FID):</span> Distribution similarity between real and generated sequences</li>
                        <li>‚Ä¢ <span class="font-semibold">Self-consistency:</span> Generated sequences score well on discriminative tasks (VEP, structure prediction)</li>
                    </ul>
                </div>

                <div class="bg-white rounded-lg p-4 border-l-4 border-amber-500">
                    <h3 class="font-bold text-slate-800 mb-2">‚ö†Ô∏è Common Pitfalls to Avoid</h3>
                    <ul class="text-xs text-slate-600 space-y-1">
                        <li>‚Ä¢ <span class="font-semibold">Mode collapse:</span> Model generates limited diversity</li>
                        <li>‚Ä¢ <span class="font-semibold">Trivial solutions:</span> Copying training examples or generating simple repeats</li>
                        <li>‚Ä¢ <span class="font-semibold">Distribution shift:</span> Generated sequences have different properties than natural ones</li>
                        <li>‚Ä¢ <span class="font-semibold">Lack of long-range coherence:</span> Locally plausible but globally nonsensical</li>
                    </ul>
                </div>
            </div>

            <div class="mt-4 bg-amber-100 rounded-lg p-4 border border-amber-300">
                <p class="text-sm text-amber-900">
                    <span class="font-bold">üí° Key Insight:</span> A model with high perplexity/accuracy on held-out data may still generate poor sequences. Always evaluate generation quality directly, not just discriminative performance. The ultimate test is experimental validation in the lab.
                </p>
            </div>
        </div>

        <!-- Metric Cards -->
        <div class="space-y-4 mb-6">
            <!-- pTM -->
            <div class="metric-card bg-white rounded-lg shadow-md border-l-4 border-blue-500 overflow-hidden">
                <div class="p-5 cursor-pointer hover:bg-gray-50 transition-colors" onclick="toggleMetric('ptm')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <div class="p-2 rounded-lg bg-blue-100">
                                <svg class="w-6 h-6 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-800">pTM (predicted Template Modeling score)</h3>
                                <p class="text-sm text-slate-600 mt-1">Confidence metric for overall protein structure alignment</p>
                            </div>
                        </div>
                        <span id="ptm-icon" class="text-slate-400">‚ñº</span>
                    </div>
                </div>
                
                <div id="ptm-content" class="metric-content px-5 pb-5 border-t border-slate-100">
                    <div class="pt-4 space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üìä What It Measures</h4>
                            <p class="text-sm text-slate-600">The expected accuracy of the predicted structure's global alignment to the true structure, focusing on domain-domain orientations and overall fold correctness.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">‚öôÔ∏è How It Works</h4>
                            <p class="text-sm text-slate-600">Derived from predicted aligned error (PAE) matrix. pTM ranges from 0 to 1, computed as the fraction of residue pairs whose predicted distance error falls within a threshold (typically less than 5√Ö). Higher values indicate confident predictions of relative domain positions.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üéØ Interpretation</h4>
                            <ul class="text-sm text-slate-600 list-disc pl-5 space-y-1">
                                <li><span class="font-semibold">pTM greater than 0.8:</span> High confidence in global structure</li>
                                <li><span class="font-semibold">pTM 0.5-0.8:</span> Moderate confidence; some domains may be misoriented</li>
                                <li><span class="font-semibold">pTM less than 0.5:</span> Low confidence; treat with caution</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üß¨ Biological Context</h4>
                            <p class="text-sm text-slate-600">Critical for multi-domain proteins, protein complexes, and evaluating whether your model understands long-range structural constraints. Models that only learn local patterns will have poor pTM scores on complex proteins.</p>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-blue-900 mb-2">üî¨ Use Case in GLM Evaluation</p>
                            <p class="text-sm text-blue-800">Generate protein structures from genomic sequences, then assess if the model's learned representations capture long-range dependencies needed for correct domain assembly. Useful for validating that context window and attention mechanisms work properly.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- pLDDT -->
            <div class="metric-card bg-white rounded-lg shadow-md border-l-4 border-purple-500 overflow-hidden">
                <div class="p-5 cursor-pointer hover:bg-gray-50 transition-colors" onclick="toggleMetric('plddt')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <div class="p-2 rounded-lg bg-purple-100">
                                <svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <circle cx="12" cy="12" r="3"></circle>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-800">pLDDT (predicted Local Distance Difference Test)</h3>
                                <p class="text-sm text-slate-600 mt-1">Per-residue confidence score for local structure quality</p>
                            </div>
                        </div>
                        <span id="plddt-icon" class="text-slate-400">‚ñº</span>
                    </div>
                </div>
                
                <div id="plddt-content" class="metric-content px-5 pb-5 border-t border-slate-100">
                    <div class="pt-4 space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üìä What It Measures</h4>
                            <p class="text-sm text-slate-600">The expected accuracy of local backbone geometry around each residue. Provides a position-specific confidence estimate (0-100) for how well the local structure is predicted.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">‚öôÔ∏è How It Works</h4>
                            <p class="text-sm text-slate-600">For each residue, pLDDT estimates the percentage of CŒ± atoms within 15√Ö that are predicted within 1.5√Ö of their true positions. Models output per-residue pLDDT values alongside structure predictions.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üéØ Interpretation</h4>
                            <ul class="text-sm text-slate-600 list-disc pl-5 space-y-1">
                                <li><span class="font-semibold">pLDDT greater than 90:</span> Very high confidence (well-ordered regions)</li>
                                <li><span class="font-semibold">pLDDT 70-90:</span> Generally reliable backbone prediction</li>
                                <li><span class="font-semibold">pLDDT 50-70:</span> Low confidence (loops, disordered regions)</li>
                                <li><span class="font-semibold">pLDDT less than 50:</span> Should not be interpreted (likely disordered)</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üß¨ Biological Context</h4>
                            <p class="text-sm text-slate-600">Helps identify which parts of a protein are well-folded vs. disordered. Low pLDDT regions often correspond to flexible loops, intrinsically disordered regions, or missing interactions with other molecules.</p>
                        </div>
                        
                        <div class="bg-purple-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-purple-900 mb-2">üî¨ Use Case in GLM Evaluation</p>
                            <p class="text-sm text-purple-800">Track whether model confidence correlates with actual structural accuracy. Compare pLDDT distributions across training to see if the model is learning which predictions to trust. Also useful for identifying if the model struggles with specific structural features (helices, sheets, loops).</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Map -->
            <div class="metric-card bg-white rounded-lg shadow-md border-l-4 border-green-500 overflow-hidden">
                <div class="p-5 cursor-pointer hover:bg-gray-50 transition-colors" onclick="toggleMetric('contact')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <div class="p-2 rounded-lg bg-green-100">
                                <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <rect x="3" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="3" width="7" height="7"></rect>
                                    <rect x="14" y="14" width="7" height="7"></rect>
                                    <rect x="3" y="14" width="7" height="7"></rect>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-800">Protein Contact Map</h3>
                                <p class="text-sm text-slate-600 mt-1">Binary matrix of spatial proximities between residues</p>
                            </div>
                        </div>
                        <span id="contact-icon" class="text-slate-400">‚ñº</span>
                    </div>
                </div>
                
                <div id="contact-content" class="metric-content px-5 pb-5 border-t border-slate-100">
                    <div class="pt-4 space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üìä What It Measures</h4>
                            <p class="text-sm text-slate-600">Which pairs of amino acids are close together in 3D space (typically within 8√Ö for CŒ≤ atoms). Provides a rotation/translation-invariant representation of protein structure.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">‚öôÔ∏è How It Works</h4>
                            <p class="text-sm text-slate-600">For a protein of length L, create an L√óL matrix where entry (i,j) = 1 if residues i and j are within the distance threshold, 0 otherwise. Compare predicted contact maps to true contacts from experimental structures or high-quality predictions.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üéØ Interpretation</h4>
                            <div class="text-sm text-slate-600 space-y-2">
                                <p>Evaluate using precision, recall, and F1 at various distance ranges:</p>
                                <ul class="list-disc pl-5 space-y-1">
                                    <li><span class="font-semibold">Short-range:</span> distance less than 12 (local secondary structure)</li>
                                    <li><span class="font-semibold">Medium-range:</span> 12 to 24 (tertiary interactions)</li>
                                    <li><span class="font-semibold">Long-range:</span> distance 24 or greater (tests true long-context understanding)</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üß¨ Biological Context</h4>
                            <p class="text-sm text-slate-600">Contact maps capture the essence of protein structure without coordinate frames. They're especially powerful for evaluating whether models learn physically meaningful constraints‚Äîresidues far apart in sequence but close in structure due to folding.</p>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-green-900 mb-2">üî¨ Use Case in GLM Evaluation</p>
                            <p class="text-sm text-green-800">Directly tests if your model's attention patterns or learned representations capture long-range dependencies in sequence. Poor long-range contact prediction often indicates the model relies too heavily on local context. Can be used for gradient saliency analysis to see which input tokens contribute to contact predictions.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AA Recovery -->
            <div class="metric-card bg-white rounded-lg shadow-md border-l-4 border-rose-500 overflow-hidden">
                <div class="p-5 cursor-pointer hover:bg-gray-50 transition-colors" onclick="toggleMetric('aarecovery')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <div class="p-2 rounded-lg bg-rose-100">
                                <svg class="w-6 h-6 text-rose-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-800">AA Recovery (Amino Acid Recovery)</h3>
                                <p class="text-sm text-slate-600 mt-1">Accuracy of reconstructing masked amino acids in protein sequences</p>
                            </div>
                        </div>
                        <span id="aarecovery-icon" class="text-slate-400">‚ñº</span>
                    </div>
                </div>
                
                <div id="aarecovery-content" class="metric-content px-5 pb-5 border-t border-slate-100">
                    <div class="pt-4 space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üìä What It Measures</h4>
                            <p class="text-sm text-slate-600">The percentage of masked amino acids that the model correctly predicts when given surrounding sequence context. A fundamental metric for evaluating whether the model has learned protein sequence constraints.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">‚öôÔ∏è How It Works</h4>
                            <p class="text-sm text-slate-600">Randomly mask a percentage of amino acids in protein sequences (typically 15-30%), ask the model to predict the masked positions, and calculate the percentage of correct predictions. Can be computed globally or stratified by amino acid type, secondary structure, or solvent accessibility.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üéØ Interpretation</h4>
                            <ul class="text-sm text-slate-600 list-disc pl-5 space-y-1">
                                <li><span class="font-semibold">Random baseline:</span> ~5% (1/20 amino acids)</li>
                                <li><span class="font-semibold">Sequence homology baseline:</span> 30-40% (using evolutionary information)</li>
                                <li><span class="font-semibold">Good protein LM:</span> 45-55%</li>
                                <li><span class="font-semibold">State-of-the-art:</span> 55-65%+ (ESM-2, ProtGPT)</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üß¨ Biological Context</h4>
                            <p class="text-sm text-slate-600">Amino acid recovery tests whether the model understands structural and functional constraints on protein sequences. High recovery suggests the model has learned which substitutions are viable at each position based on local structure, chemistry, and evolutionary patterns.</p>
                        </div>
                        
                        <div class="bg-rose-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-rose-900 mb-2">üî¨ Use Case in GLM Evaluation</p>
                            <p class="text-sm text-rose-800">Essential baseline metric for protein language models. Track across training to monitor learning progress. Can stratify by residue burial (surface vs. core), secondary structure (helix vs. sheet vs. loop), or amino acid properties (hydrophobic vs. charged) to identify what the model learns well vs. poorly.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Operon Inpainting -->
            <div class="metric-card bg-white rounded-lg shadow-md border-l-4 border-orange-500 overflow-hidden">
                <div class="p-5 cursor-pointer hover:bg-gray-50 transition-colors" onclick="toggleMetric('operon')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-center gap-3 flex-1">
                            <div class="p-2 rounded-lg bg-orange-100">
                                <svg class="w-6 h-6 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold text-slate-800">Operon Inpainting</h3>
                                <p class="text-sm text-slate-600 mt-1">Masked gene reconstruction within functional genomic units</p>
                            </div>
                        </div>
                        <span id="operon-icon" class="text-slate-400">‚ñº</span>
                    </div>
                </div>
                
                <div id="operon-content" class="metric-content px-5 pb-5 border-t border-slate-100">
                    <div class="pt-4 space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üìä What It Measures</h4>
                            <p class="text-sm text-slate-600">The model's ability to reconstruct a masked gene using surrounding genomic context, testing both sequence prediction accuracy and functional genomic understanding.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">‚öôÔ∏è How It Works</h4>
                            <p class="text-sm text-slate-600">Mask a gene within an operon (a cluster of co-regulated genes in bacteria), then ask the model to reconstruct it. Can use various masking strategies: full gene masking, partial masking, or noising at different timesteps. Evaluate via perplexity, exact match accuracy, or functional equivalence.</p>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üéØ Interpretation</h4>
                            <ul class="text-sm text-slate-600 list-disc pl-5 space-y-1">
                                <li><span class="font-semibold">High accuracy:</span> Model understands functional gene co-occurrence</li>
                                <li><span class="font-semibold">Random predictions:</span> Model lacks functional genomic context</li>
                                <li><span class="font-semibold">Local copying:</span> Model relies on sequence similarity, not function</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-slate-700 mb-2">üß¨ Biological Context</h4>
                            <p class="text-sm text-slate-600">Operons are fundamental units of bacterial gene regulation. Genes in an operon are functionally related and transcribed together. Successfully predicting a masked gene requires understanding regulatory context, functional relationships, and genomic organization‚Äînot just sequence patterns.</p>
                        </div>
                        
                        <div class="bg-orange-50 p-4 rounded-lg">
                            <p class="text-sm font-semibold text-orange-900 mb-2">üî¨ Use Case in GLM Evaluation</p>
                            <p class="text-sm text-orange-800">Perfect for testing long-context learning and functional understanding. Use gradient saliency to check if the model actually uses distant context or just predicts from local patterns. The conversation transcript shows this being used to validate that span masking encourages distant context usage at early/late denoising timesteps.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Metrics -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-2xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
                </svg>
                Additional Evaluation Metrics
            </h2>

            <!-- Category 1: Structure Prediction -->
            <div class="mb-6">
                <h3 class="text-lg font-bold text-blue-900 mb-3 pb-2 border-b-2 border-blue-200">Structure Prediction Metrics</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üìè TM-score</h3>
                        <p class="text-sm text-slate-600 mb-2">Template Modeling score for comparing predicted vs. actual 3D structures (0-1 scale).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Standard structural similarity metric. TM-score greater than 0.5 indicates similar folds; greater than 0.6 indicates highly similar structures.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üé≤ RMSD (Root Mean Square Deviation)</h3>
                        <p class="text-sm text-slate-600 mb-2">Measures average distance between corresponding atoms in predicted vs. true structures.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Lower is better. RMSD less than 2√Ö is excellent; 2-5√Ö is good; greater than 5√Ö indicates significant structural differences.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üîÑ Secondary Structure Prediction (Q3/Q8)</h3>
                        <p class="text-sm text-slate-600 mb-2">Accuracy of predicting protein secondary structure (helix, sheet, coil) from sequence.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Q3 (3-state) baseline ~65%, good models ~80%+. Q8 (8-state) is more challenging. Tests local structure understanding.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üî¨ Sequence Generation Quality</h3>
                        <p class="text-sm text-slate-600 mb-2">Generate novel sequences and assess via structure prediction, functional prediction, or experimental validation.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Ultimate test of biological understanding. Can generated sequences fold properly? Are they functionally coherent?</p>
                    </div>
                </div>
            </div>

            <!-- Category 2: Spatial Interactions -->
            <div class="mb-6">
                <h3 class="text-lg font-bold text-purple-900 mb-3 pb-2 border-b-2 border-purple-200">Spatial Interaction Metrics</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border border-slate-200 rounded-lg p-4 hover:border-purple-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üß¨ Hi-C Contact Maps</h3>
                        <p class="text-sm text-slate-600 mb-2">3D chromatin interaction maps showing which genomic regions physically interact in the nucleus.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Evaluate long-range regulatory element interactions (enhancer-promoter contacts). Tests eukaryotic genome organization understanding.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-purple-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üîó StringDB Integration</h3>
                        <p class="text-sm text-slate-600 mb-2">Protein-protein interaction network data for functional associations.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Test if model learns which proteins interact. Can generate training data by upsampling interacting gene pairs.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-purple-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üîó Enhancer-Gene Linking</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict which enhancers regulate which genes, validated against experimental data (AlphaGenome benchmark).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests long-range regulatory understanding. Critical for interpreting noncoding variants. Often combined with contact map and expression predictions.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-purple-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üîç Long-Context Recall (Needle in Haystack)</h3>
                        <p class="text-sm text-slate-600 mb-2">Retrieve a 100bp "needle" sequence from different positions in 1M bp "haystack" (Evo2 metric).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests whether model can actually use full context window. Essential for validating long-context architectures work as intended.</p>
                    </div>
                </div>
            </div>

            <!-- Category 3: Functional Context -->
            <div class="mb-6">
                <h3 class="text-lg font-bold text-green-900 mb-3 pb-2 border-b-2 border-green-200">Functional Context Metrics</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üéØ Functional Annotation Tasks</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict gene function, subcellular localization, protein family, or enzymatic activity.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Downstream task performance indicates whether embeddings capture biologically meaningful features.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üß¨ Gene Essentiality Prediction</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict whether a gene is essential for organism survival based on sequence/context.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests functional understanding. Essential genes often have specific sequence properties and genomic contexts.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üéØ Promoter/Regulatory Element Detection</h3>
                        <p class="text-sm text-slate-600 mb-2">Identify transcription factor binding sites, promoters, enhancers from DNA sequence.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests whether model learns regulatory grammar. Critical for eukaryotic genome understanding.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üìä Gene Expression Log-Fold Change (LFC)</h3>
                        <p class="text-sm text-slate-600 mb-2">Pearson correlation between predicted and measured gene expression changes (AlphaGenome key metric).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests ability to predict how variants affect gene expression levels. Cell-type-specific predictions assess context understanding. AlphaGenome: +14.7% over Borzoi.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">‚úÇÔ∏è PSI (Percent Spliced In) Prediction</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict alternative splicing ratios: PSI3 (3' splice site usage), PSI5 (5' splice site usage).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Critical for understanding isoform variation. Pearson r between predicted vs. measured PSI across tissues. AlphaGenome evaluates per-tissue and tissue-specific patterns.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-green-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">‚ö° Fitness Prediction</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict protein function/activity from sequence using deep mutational scanning data.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Gold standard for validating learned representations. Correlation with experimental fitness measurements (Spearman rho typically 0.4-0.7).</p>
                    </div>
                </div>
            </div>

            <!-- Category 4: Variant Effect & General Metrics -->
            <div>
                <h3 class="text-lg font-bold text-orange-900 mb-3 pb-2 border-b-2 border-orange-200">Variant Effect & General Model Metrics</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üß¨ Variant Effect Prediction (VEP) - AUROC</h3>
                        <p class="text-sm text-slate-600 mb-2">Area under ROC curve for distinguishing pathogenic vs. benign variants (used in Evo2, AlphaGenome).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Standard benchmark on ClinVar, BRCA1/2, splice variants. AUROC allows comparison across variant types with different pathogenicity rates. State-of-the-art: 0.85-0.92 depending on variant class.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üéØ eQTL/sQTL Classification</h3>
                        <p class="text-sm text-slate-600 mb-2">Predict whether variants are expression QTLs (eQTL) or splicing QTLs (sQTL).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Tests ability to identify regulatory variants affecting expression or splicing. AlphaGenome: +25.5% improvement in eQTL sign prediction, state-of-the-art on sQTL fine-mapping.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üß™ Jensen-Shannon Divergence (Accessibility)</h3>
                        <p class="text-sm text-slate-600 mb-2">Measures difference between predicted and observed ATAC/DNase profiles (AlphaGenome).</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Evaluates chromatin accessibility prediction quality. Lower divergence = better profile match. AlphaGenome: +1.6% for ATAC, +9.5% for DNase over ChromBPNet.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üìä Perplexity</h3>
                        <p class="text-sm text-slate-600 mb-2">Standard language modeling metric measuring how well the model predicts held-out sequences.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> General sequence prediction quality. Lower perplexity indicates better learned representations, but doesn't guarantee biological understanding.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üßÆ Cross-Entropy / Negative Log-Likelihood</h3>
                        <p class="text-sm text-slate-600 mb-2">Standard training loss for language models measuring prediction uncertainty.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Track during training to monitor convergence. Lower values indicate better sequence probability modeling.</p>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 hover:border-orange-300 transition-colors">
                        <h3 class="font-bold text-slate-800 mb-2">üß™ Gradient Saliency Analysis</h3>
                        <p class="text-sm text-slate-600 mb-2">Compute input √ó gradient to identify which input tokens contribute most to predictions.</p>
                        <p class="text-xs text-slate-500"><span class="font-semibold">Use:</span> Debug attention patterns. Validate that long-context mechanisms actually use distant context vs. local copying. Fast and scalable.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Best Practices -->
        <div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg shadow-md p-6 border-2 border-indigo-200">
            <h2 class="text-xl font-bold text-slate-800 mb-3">üí° Evaluation Best Practices</h2>
            <ul class="space-y-2 text-sm text-slate-700">
                <li class="flex items-start gap-2">
                    <span class="text-indigo-600 font-bold">‚Ä¢</span>
                    <span><span class="font-semibold">Use multiple metrics:</span> No single metric captures all aspects of biological understanding. Structure, function, and context all matter.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-indigo-600 font-bold">‚Ä¢</span>
                    <span><span class="font-semibold">Test across scales:</span> Evaluate local (secondary structure), medium (domain), and long-range (inter-domain, regulatory) interactions.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-indigo-600 font-bold">‚Ä¢</span>
                    <span><span class="font-semibold">Track during training:</span> Monitor metrics throughout pretraining to understand what the model learns and when.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-indigo-600 font-bold">‚Ä¢</span>
                    <span><span class="font-semibold">Use gradient analysis:</span> Don't just trust performance‚Äîverify the model is using the right context via saliency or attention analysis.</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-indigo-600 font-bold">‚Ä¢</span>
                    <span><span class="font-semibold">Domain-specific validation:</span> Test on prokaryotic (operons, CRISPR) and eukaryotic (chromatin, splicing) features separately.</span>
                </li>
            </ul>
        </div>
    </div>

    <script>
        function toggleMetric(metricId) {
            const content = document.getElementById(metricId + '-content');
            const icon = document.getElementById(metricId + '-icon');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                icon.textContent = '‚ñº';
            } else {
                content.classList.add('expanded');
                icon.textContent = '‚ñ≤';
            }
        }
    </script>
</body>
</html>
